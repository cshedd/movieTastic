<!DOCTYPE html>
<html>
<head>
	<title>MovieTastic</title>
</head>
<body>

<div class="container">
	<h1>Cool Movie Search</h1>

<!-- 	<div id="buttons">
		<button data-movie="ghost">The Ghost Writer</button>
		<button data-movie="step">Step Brothers</button>
		<button data-movie="titanic">Titanic</button>
		<button data-movie="frozen">Frozen</button>
		<button data-movie="gump">Forrest Gump</button>
		<button data-movie="emma">Emma</button>
		<button data-movie="jane">Jane Eyre</button>
		<button data-movie="scoundrels">School for Scoundrels</button>
	</div>	 -->

	<!-- Rendered buttons dumped here -->
	<div id="buttonsView"></div>
		
	<form id="movie-form">
		<label for="movie-input">Add a Movie!</label>
		<input type="text" id="movie-input"><br>

		<!-- Button triggers new movie to be added -->
		<input id="addMovie" type="submit" value="Add a Movie!">
	</form>
	
	<!-- Movies dumped here -->
	<div id="moviesView"></div>
</div>

<script src='http://code.jquery.com/jquery-2.1.3.min.js'></script>
<script type="text/javascript">
	
	// Initial movie array 
	var movies = ['The Ghost Writer', 'Step Brothers', 'Titanic', 'Frozen', 'Forrest Gump', 'Emma', 'Jane Eyre', 'School for Scoundrels']; 




	function displayGif() {

		var movie = $(this).attr('data-name');
		var queryURL = "http://api.giphy.com/v1/gifs/random?api_key=dc6zaTOxFJmzC";

		//Creates AJAX call for specific movie
		$.ajax({
				url: queryURL,
				method: 'GET'
		}).done(function(response) {

		//Creates generic div to hold movies
		var movieDiv = $('<div class="movie">');
		var movieDiv = $('<div>').attr('class','movie');

		//Gets the rating data
		var rating = response.Rated;

		//Creates element to have rating displayed
		var pRating = $('<p>').text("Rating: " + rating);

		//Displays rating
		movieDiv.append(pRating);

		//Creates an element to hold GIF
		var movieGif = $('<div>')

		})
	}	


	function renderButtons() {

		$('#buttonsView').empty();

		for (var i = 0; i < movies.length; i++) {

			var a = $('<button>')
			a.addClass('movie');
			a.attr('data-name', movies[i]);
			a.text(movies[i]);
			$('#buttonsView').append(a);
		}
	}
	renderButtons()

	//--------------------------------------------------------------------------------

	//Function for events where button clicked

	$('#addMovie').on('click', function() {

		//Grabs input from the textbox
		var movie = $('#movie-input').val().trim();

		//Movie from textbox added to array
		movies.push(movie);

		//Array now runs which handles processing of movie array
		renderButtons();

		return false;

	})	


		.done(function(response) {
			var results = response.data.image_original_url;

			var movieImage = $("<img>");

			movieImage.attr('src', results);
			movieImage.attr('alt', 'movie image');

			$('#moviesView').prepend(results);

			console.log(response);


		});
	};



</script>

</body>
</html>